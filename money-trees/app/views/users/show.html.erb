<p id="notice"><%= notice %></p>

<h1>Dashboard</h1>

<div class="row">
  <div class="col-md-9">
    <h3>Welcome, <%= @user.name.titleize %></h3>
  </div>
  <div class="col-md-3">
    <%= link_to 'Edit', edit_user_path(@user) %>
  </div>
</div>
<hr>
<div class="row">
  <div class="col-md-3">
    <h4>Grows</h4>
    <div class="chart" data-percent="<%= @user.grows.count %>" data-scale-color="#ffb400"><%= @user.grows.count %></div>
  </div>
  <div class="col-md-3">
    <h4>Rooms</h4>
    <div class="chart" data-percent="<%= @user.rooms.count %>" data-scale-color="#ffb400"><%= @user.rooms.count %></div>
  </div>
  <div class="col-md-3">
    <h4>Plants</h4>
    <div class="chart" data-percent="<%= @user.plants.count %>" data-scale-color="#ffb400"><%= @user.plants.count %></div>
  </div>
  <div class="col-md-3">
    <h4>Strains</h4>
    <div class="chart" data-percent="<%= @user.strains.count %>" data-scale-color="#ffb400"><%= @user.strains.count %></div>
  </div>
</div>
<hr>
<h2>Grows</h2>
<table>
  <thead>
  <tr>
    <th>Name</th>
    <th>Rooms</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @user.grows.each do |grow| %>
      <tr>
        <td><%= grow.name.titleize %></td>
        <td><%= grow.rooms.count %></td>
        <td><%= link_to 'Show', grow %></td>
        <td><%= link_to 'Edit', edit_grow_path(grow) %></td>
        <td><%= link_to 'Destroy', grow, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<script>
    $(function() {
        $('.chart').easyPieChart({
            lineWidth:8,
            scaleLength:0
        });
    });
</script>
